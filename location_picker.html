<!DOCTYPE html>
<html>
  <head>
    <title>Drone Location Picker</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY"></script>
  </head>
  <body>
    <h2>Click on the map to set destination</h2>
    <div id="map" style="height:500px;width:100%;"></div>
    <script>
      let start = null;
      let end = null;

      navigator.geolocation.getCurrentPosition((pos) => {
        start = { lat: pos.coords.latitude, lng: pos.coords.longitude };
        const map = new google.maps.Map(document.getElementById("map"), {
          center: start,
          zoom: 14,
        });

        new google.maps.Marker({ position: start, map, label: "S" });

        map.addListener("click", (e) => {
          end = { lat: e.latLng.lat(), lng: e.latLng.lng() };
          new google.maps.Marker({ position: end, map, label: "E" });

          fetch("http://localhost:5000/set_coords", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ start, end }),
          }).then(() => alert("Coordinates sent to backend!"));
        });
      });
    </script>
  </body>
</html>
